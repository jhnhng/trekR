<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Setting Up the Data • trekR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Setting Up the Data">
<meta property="og:description" content="trekR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">trekR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1.0000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Setting%20Up%20the%20Data.html">Setting Up the Data</a>
    </li>
    <li>
      <a href="../articles/Using-trekR.html">Using the functions in `trekR`</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Setting Up the Data</h1>
            
      
      
      <div class="hidden name"><code>Setting Up the Data.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">trekR</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="setting-up-the-data">Setting Up the Data<a class="anchor" aria-label="anchor" href="#setting-up-the-data"></a>
</h2>
<p>The example shown below is one of many ways the data could be processed. The important components required is a <code>list</code> object containing home range kernels for each interval that is created for at least one individual.</p>
<p>For example, for a single individual if I wanted to break a one month period into 10-day intervals I would get a total of three 10-day intervals. These intervals should be in a <code>list</code> object, and each element within the <code>list</code> should represent a single interval.</p>
<div class="section level3">
<h3 id="create-intervals">Create Intervals<a class="anchor" aria-label="anchor" href="#create-intervals"></a>
</h3>
<p>We created 10-day intervals for deer in the January and July. We first created a <code>new</code> column using the <code>floor_Date()</code> function to obtain the 10-day extents within the months. We included the 31st day (if a month had 31 days) in the third 10-day interval to prevent the creation of a 4th 10-day interval with only a single day in it.</p>
</div>
<div class="section level3">
<h3 id="intervals-for-january">Intervals for January<a class="anchor" aria-label="anchor" href="#intervals-for-january"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">jan</span> <span class="op">&lt;-</span> <span class="va">deer</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="co"># Creates a new column assigning the first day in the 10-day interval in which</span>
  <span class="co"># the date falls under (e.g., 01-03-2021 would be in the first 10-day interval</span>
  <span class="co"># so the `floor_date` assigned to it would be 01-01-2021)</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>new <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html" class="external-link">floor_date</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">"10 days"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="co"># For any months that has 31 days, the 31st day would normally be assigned its </span>
  <span class="co"># own interval. The code below takes the 31st day and joins it with the </span>
  <span class="co"># previous interval. </span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">ID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>new <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html" class="external-link">day</a></span><span class="op">(</span><span class="va">new</span><span class="op">)</span> <span class="op">==</span> <span class="fl">31</span>, <span class="va">new</span> <span class="op">-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">days</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>, <span class="va">new</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">new</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="co"># Filter the data by the season based on the `season_categ` column</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="intervals-for-july">Intervals for July<a class="anchor" aria-label="anchor" href="#intervals-for-july"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">july</span> <span class="op">&lt;-</span> <span class="va">deer</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="co"># Creates a new column assigning the first day in the 10-day interval in which</span>
  <span class="co"># the date falls under (e.g., 01-03-2021 would be in the first 10-day interval</span>
  <span class="co"># so the `floor_date` assigned to it would be 01-01-2021)</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>new <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html" class="external-link">floor_date</a></span><span class="op">(</span><span class="va">date</span>, <span class="st">"10 days"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="co"># For any months that has 31 days, the 31st day would normally be assigned its </span>
  <span class="co"># own interval. The code below takes the 31st day and joins it with the </span>
  <span class="co"># previous interval. </span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">ID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>new <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html" class="external-link">day</a></span><span class="op">(</span><span class="va">new</span><span class="op">)</span> <span class="op">==</span> <span class="fl">31</span>, <span class="va">new</span> <span class="op">-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">days</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>, <span class="va">new</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">new</span>, .add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
  <span class="co"># Filter the data by the season based on the `season_categ` column</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">month</span> <span class="op">==</span> <span class="st">"7"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Elements in the list for one individual in January:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">jan</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span>
<span class="co">#&gt; &lt;list_of&lt;</span>
<span class="co">#&gt;   tbl_df&lt;</span>
<span class="co">#&gt;     ID   : factor&lt;15f40&gt;</span>
<span class="co">#&gt;     date : date</span>
<span class="co">#&gt;     utm_x: double</span>
<span class="co">#&gt;     utm_y: double</span>
<span class="co">#&gt;     month: double</span>
<span class="co">#&gt;     jDate: double</span>
<span class="co">#&gt;     new  : date</span>
<span class="co">#&gt;   &gt;</span>
<span class="co">#&gt; &gt;[3]&gt;</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 30 x 7</span></span>
<span class="co">#&gt;    ID    date         utm_x    utm_y month jDate new       </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> A     2013-01-01 <span style="text-decoration: underline;">675</span>041. 4<span style="text-decoration: underline;">100</span>659.     1 <span style="text-decoration: underline;">15</span>706 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> A     2013-01-04 <span style="text-decoration: underline;">677</span>977. 4<span style="text-decoration: underline;">099</span>208.     1 <span style="text-decoration: underline;">15</span>709 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> A     2013-01-07 <span style="text-decoration: underline;">668</span>007. 4<span style="text-decoration: underline;">099</span>102.     1 <span style="text-decoration: underline;">15</span>712 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> A     2013-01-10 <span style="text-decoration: underline;">679</span>818. 4<span style="text-decoration: underline;">100</span>927.     1 <span style="text-decoration: underline;">15</span>715 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> A     2013-01-02 <span style="text-decoration: underline;">677</span>705. 4<span style="text-decoration: underline;">100</span>835.     1 <span style="text-decoration: underline;">15</span>707 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> A     2013-01-05 <span style="text-decoration: underline;">672</span>386. 4<span style="text-decoration: underline;">099</span>735.     1 <span style="text-decoration: underline;">15</span>710 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> A     2013-01-08 <span style="text-decoration: underline;">678</span>703. 4<span style="text-decoration: underline;">099</span>185.     1 <span style="text-decoration: underline;">15</span>713 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> A     2013-01-03 <span style="text-decoration: underline;">673</span>280. 4<span style="text-decoration: underline;">099</span>504.     1 <span style="text-decoration: underline;">15</span>708 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> A     2013-01-06 <span style="text-decoration: underline;">673</span>290. 4<span style="text-decoration: underline;">100</span>454.     1 <span style="text-decoration: underline;">15</span>711 2013-01-01</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> A     2013-01-09 <span style="text-decoration: underline;">669</span>173. 4<span style="text-decoration: underline;">099</span>010.     1 <span style="text-decoration: underline;">15</span>714 2013-01-01</span>
<span class="co">#&gt; <span style="color: #949494;"># ... with 20 more rows</span></span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 30 x 7</span></span>
<span class="co">#&gt;    ID    date         utm_x    utm_y month jDate new       </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> A     2013-01-13 <span style="text-decoration: underline;">675</span>303. 4<span style="text-decoration: underline;">100</span>816.     1 <span style="text-decoration: underline;">15</span>718 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> A     2013-01-16 <span style="text-decoration: underline;">670</span>449. 4<span style="text-decoration: underline;">099</span>749.     1 <span style="text-decoration: underline;">15</span>721 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> A     2013-01-19 <span style="text-decoration: underline;">665</span>411. 4<span style="text-decoration: underline;">099</span>808.     1 <span style="text-decoration: underline;">15</span>724 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> A     2013-01-11 <span style="text-decoration: underline;">669</span>950. 4<span style="text-decoration: underline;">099</span>564.     1 <span style="text-decoration: underline;">15</span>716 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> A     2013-01-14 <span style="text-decoration: underline;">667</span>699. 4<span style="text-decoration: underline;">100</span>489.     1 <span style="text-decoration: underline;">15</span>719 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> A     2013-01-17 <span style="text-decoration: underline;">676</span>642. 4<span style="text-decoration: underline;">099</span>023.     1 <span style="text-decoration: underline;">15</span>722 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> A     2013-01-20 <span style="text-decoration: underline;">676</span>167. 4<span style="text-decoration: underline;">099</span>622.     1 <span style="text-decoration: underline;">15</span>725 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> A     2013-01-12 <span style="text-decoration: underline;">663</span>410. 4<span style="text-decoration: underline;">099</span>471.     1 <span style="text-decoration: underline;">15</span>717 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> A     2013-01-15 <span style="text-decoration: underline;">674</span>337. 4<span style="text-decoration: underline;">099</span>275.     1 <span style="text-decoration: underline;">15</span>720 2013-01-11</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> A     2013-01-18 <span style="text-decoration: underline;">668</span>059. 4<span style="text-decoration: underline;">099</span>773.     1 <span style="text-decoration: underline;">15</span>723 2013-01-11</span>
<span class="co">#&gt; <span style="color: #949494;"># ... with 20 more rows</span></span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; <span style="color: #949494;"># A tibble: 33 x 7</span></span>
<span class="co">#&gt;    ID    date         utm_x    utm_y month jDate new       </span>
<span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>    </span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> A     2013-01-22 <span style="text-decoration: underline;">668</span>037. 4<span style="text-decoration: underline;">100</span>695.     1 <span style="text-decoration: underline;">15</span>727 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> A     2013-01-25 <span style="text-decoration: underline;">673</span>684. 4<span style="text-decoration: underline;">099</span>971.     1 <span style="text-decoration: underline;">15</span>730 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> A     2013-01-28 <span style="text-decoration: underline;">671</span>898. 4<span style="text-decoration: underline;">100</span>186.     1 <span style="text-decoration: underline;">15</span>733 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> A     2013-01-31 <span style="text-decoration: underline;">676</span>322. 4<span style="text-decoration: underline;">098</span>825.     1 <span style="text-decoration: underline;">15</span>736 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> A     2013-01-23 <span style="text-decoration: underline;">665</span>581. 4<span style="text-decoration: underline;">099</span>176.     1 <span style="text-decoration: underline;">15</span>728 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> A     2013-01-26 <span style="text-decoration: underline;">676</span>227. 4<span style="text-decoration: underline;">100</span>184.     1 <span style="text-decoration: underline;">15</span>731 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> A     2013-01-29 <span style="text-decoration: underline;">665</span>216. 4<span style="text-decoration: underline;">100</span>765.     1 <span style="text-decoration: underline;">15</span>734 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> A     2013-01-21 <span style="text-decoration: underline;">666</span>105. 4<span style="text-decoration: underline;">100</span>722.     1 <span style="text-decoration: underline;">15</span>726 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> A     2013-01-24 <span style="text-decoration: underline;">670</span>321. 4<span style="text-decoration: underline;">100</span>484.     1 <span style="text-decoration: underline;">15</span>729 2013-01-21</span>
<span class="co">#&gt; <span style="color: #BCBCBC;">10</span> A     2013-01-27 <span style="text-decoration: underline;">676</span>075. 4<span style="text-decoration: underline;">098</span>786.     1 <span style="text-decoration: underline;">15</span>732 2013-01-21</span>
<span class="co">#&gt; <span style="color: #949494;"># ... with 23 more rows</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="create-tracks-for-each-interval">Create Tracks for Each Interval<a class="anchor" aria-label="anchor" href="#create-tracks-for-each-interval"></a>
</h2>
<p>Before we estimate LoCoH home range for each of these 10-day intervals, we first create objects of class <code>track_xyt</code> using <code>make_track()</code> from the <code>amt</code> package. This function creates a <code>track</code> using the <code>utm_x</code> and <code>utm_y</code> columns from <code>jan</code> and <code>july</code>. <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> allows us to apply the specified function across a <code>list</code> object (e.g., <code>jan</code> and <code>july</code>)</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">track_list_sum</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">jan</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/track.html" class="external-link">make_track</a></span><span class="op">(</span>tbl <span class="op">=</span> <span class="va">x</span>, .x <span class="op">=</span> <span class="va">utm_x</span>, .y <span class="op">=</span> <span class="va">utm_y</span>, .t <span class="op">=</span> <span class="va">date</span>,
             uid <span class="op">=</span> <span class="va">ID</span>,
             <span class="co"># lat/long: 4326 (lat/long, WGS84 datum).</span>
             <span class="co"># utm: crs = sp::CRS("+init=epsg:32612"))</span>
             crs <span class="op">=</span> <span class="fl">32612</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="va">track_list_win</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">july</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/track.html" class="external-link">make_track</a></span><span class="op">(</span>tbl <span class="op">=</span> <span class="va">x</span>, .x <span class="op">=</span> <span class="va">utm_x</span>, .y <span class="op">=</span> <span class="va">utm_y</span>, .t <span class="op">=</span> <span class="va">date</span>,
             uid <span class="op">=</span> <span class="va">ID</span>,
             crs <span class="op">=</span> <span class="fl">32612</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creates-locohs-using-the-tracks">Creates LoCoHs Using the Tracks<a class="anchor" aria-label="anchor" href="#creates-locohs-using-the-tracks"></a>
</h2>
<p>Using the <code>track</code> created for the <code>jan</code> and <code>july</code>, we estimate type “a” LoCoH home range using <code>hr_locoh()</code> from the <code>amt</code> package. If you would like to learn more about the arguments of this function please refer to <code><a href="https://rdrr.io/pkg/amt/man/hr.html" class="external-link">?amt::hr_locoh</a></code> for more details.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sum_locoh</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">track_list_sum</span>, <span class="kw">function</span><span class="op">(</span><span class="va">tracks</span><span class="op">)</span><span class="op">{</span>
    <span class="co"># Calculate LoCoH a*</span>
    <span class="va">dmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">dist</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x_"</span>, <span class="st">"y_"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
    <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">dmat</span><span class="op">)</span>

    <span class="co"># Fit LoCoH</span>
    <span class="va">locoh</span> <span class="op">&lt;-</span> <span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/hr.html" class="external-link">hr_locoh</a></span><span class="op">(</span>
      x <span class="op">=</span> <span class="va">tracks</span>,
      levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,
      keep.data <span class="op">=</span> <span class="cn">TRUE</span>,
      n <span class="op">=</span> <span class="va">a</span>,
      type <span class="op">=</span> <span class="st">"a"</span>,
      rand_buffer <span class="op">=</span> <span class="fl">1e-05</span>
    <span class="op">)</span>
    
    
<span class="op">}</span><span class="op">)</span>
<span class="va">win_locoh</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">track_list_win</span>, <span class="kw">function</span><span class="op">(</span><span class="va">tracks</span><span class="op">)</span><span class="op">{</span>
    <span class="co"># Calculate LoCoH a*</span>
    <span class="va">dmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/dist.html" class="external-link">dist</a></span><span class="op">(</span><span class="va">tracks</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x_"</span>, <span class="st">"y_"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>
    <span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">dmat</span><span class="op">)</span>

    <span class="co"># Fit LoCoH</span>
    <span class="va">locoh</span> <span class="op">&lt;-</span> <span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/hr.html" class="external-link">hr_locoh</a></span><span class="op">(</span>
      x <span class="op">=</span> <span class="va">tracks</span>,
      levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span>,
      keep.data <span class="op">=</span> <span class="cn">TRUE</span>,
      n <span class="op">=</span> <span class="va">a</span>,
      type <span class="op">=</span> <span class="st">"a"</span>,
      rand_buffer <span class="op">=</span> <span class="fl">1e-05</span>
    <span class="op">)</span>
    
    
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creates-isopleths-from-the-locohs">Creates Isopleths from the LoCoHs<a class="anchor" aria-label="anchor" href="#creates-isopleths-from-the-locohs"></a>
</h2>
<p>We then created isopleths from the LoCoH home range estimates using <code>hr_isopleths()</code>from the <code>amt</code> package.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sum_iso</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">sum_locoh</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  <span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/hr.html" class="external-link">hr_isopleths</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>
<span class="va">win_iso</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">win_locoh</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span>
  <span class="fu">amt</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/amt/man/hr.html" class="external-link">hr_isopleths</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="rasterizes-the-isopleths">Rasterizes the Isopleths<a class="anchor" aria-label="anchor" href="#rasterizes-the-isopleths"></a>
</h2>
<p>After creating isopleths for each of the intervals, we have to rasterize them. Similar to the the previous functions, we use <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> to apply our function across our <code>list</code> object. We first create a template raster with a resolution of “50” (keep in mind that the speed the isopleths are <code>rasterize()</code> will be dependent on the specified resolution, with time of processing increasing with smaller resolutions). The projection of the template raster will match that of the specified isopleth.</p>
<p>After creating rasters for each interval, we then subtract all the isopleth values from, then normalize them.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sum_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">sum_iso</span>, <span class="kw">function</span><span class="op">(</span><span class="va">iso</span><span class="op">)</span><span class="op">{</span>
<span class="co"># Creates template raster</span>
    <span class="va">template_raster</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="va">iso</span>,
      resolution <span class="op">=</span> <span class="fl">50</span>, vals <span class="op">=</span> <span class="fl">0</span>,
      crs <span class="op">=</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">iso</span><span class="op">)</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
    <span class="op">)</span>
    <span class="co"># Rasterizes the isopleth</span>
    <span class="va">raster_locoh</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/rasterize.html" class="external-link">rasterize</a></span><span class="op">(</span><span class="va">iso</span>,
      <span class="va">template_raster</span>,
      field <span class="op">=</span> <span class="st">"level"</span>,
      fun <span class="op">=</span> <span class="st">"first"</span>
    <span class="op">)</span>

    <span class="co"># Now you want to subtract all the isopleth values from 1</span>
    <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html" class="external-link">values</a></span><span class="op">(</span><span class="va">raster_locoh</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html" class="external-link">values</a></span><span class="op">(</span><span class="va">raster_locoh</span><span class="op">)</span>

    <span class="co"># Now normalize</span>
    <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">raster_locoh</span> <span class="op">/</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellStats.html" class="external-link">cellStats</a></span><span class="op">(</span><span class="va">raster_locoh</span>, <span class="va">sum</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="va">win_raster</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">win_iso</span>, <span class="kw">function</span><span class="op">(</span><span class="va">iso</span><span class="op">)</span><span class="op">{</span>
<span class="co"># Creates template raster</span>
    <span class="va">template_raster</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="va">iso</span>,   
      resolution <span class="op">=</span> <span class="fl">250</span>, vals <span class="op">=</span> <span class="fl">0</span>,
      crs <span class="op">=</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">iso</span><span class="op">)</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
    <span class="op">)</span>
    <span class="co"># Rasterizes the isopleth</span>
    <span class="va">raster_locoh</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/rasterize.html" class="external-link">rasterize</a></span><span class="op">(</span><span class="va">iso</span>,
      <span class="va">template_raster</span>,
      field <span class="op">=</span> <span class="st">"level"</span>,
      fun <span class="op">=</span> <span class="st">"first"</span>
    <span class="op">)</span>

    <span class="co"># Now you want to subtract all the isopleth values from 1</span>
    <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html" class="external-link">values</a></span><span class="op">(</span><span class="va">raster_locoh</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fl">1</span> <span class="op">-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/getValues.html" class="external-link">values</a></span><span class="op">(</span><span class="va">raster_locoh</span><span class="op">)</span>

    <span class="co"># Now normalize</span>
    <span class="va">x</span> <span class="op">&lt;-</span> <span class="va">raster_locoh</span> <span class="op">/</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/cellStats.html" class="external-link">cellStats</a></span><span class="op">(</span><span class="va">raster_locoh</span>, <span class="va">sum</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">### Removing IDs that don't have all of the intervals ####</span>
<span class="co"># Removes any `AnimalID` that doesn't have three intervals in both the `jan` and</span>
<span class="co"># the `july` list.</span>
<span class="va">remove_component</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">list1</span>, <span class="va">list2</span><span class="op">)</span> <span class="op">{</span>

  <span class="va">bad_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span>
    <span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html" class="external-link">enframe</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">list1</span><span class="op">)</span><span class="op">)</span>, <span class="st">"AnimalID"</span>, <span class="st">"list1"</span><span class="op">)</span>,
    <span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html" class="external-link">enframe</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">list2</span><span class="op">)</span><span class="op">)</span>, <span class="st">"AnimalID"</span>, <span class="st">"list2"</span><span class="op">)</span>,
    by <span class="op">=</span> <span class="st">"AnimalID"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">list1</span> <span class="op">!=</span> <span class="va">list2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">AnimalID</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="op">)</span>

  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>new_list1 <span class="op">=</span> <span class="va">list1</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">list1</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">bad_id</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>,
       new_list2 <span class="op">=</span> <span class="va">list2</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">list2</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">bad_id</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>

<span class="op">}</span>
<span class="co"># Creates a single list consisting of both the "cleaned" `jan` and `july` list</span>
<span class="va">seasons</span> <span class="op">&lt;-</span> <span class="fu">remove_component</span><span class="op">(</span><span class="va">sum_raster</span>, <span class="va">win_raster</span><span class="op">)</span>
<span class="va">win_sum</span> <span class="op">&lt;-</span> <span class="fu">remove_component</span><span class="op">(</span><span class="va">july</span>, <span class="va">jan</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="setting-up-input-for-calculating-emds-in-environmental-space">Setting up input for Calculating EMDs in Environmental Space<a class="anchor" aria-label="anchor" href="#setting-up-input-for-calculating-emds-in-environmental-space"></a>
</h2>
<p>The data set up above have specifically focused on setting up the data for calculating EMDs in geographical space. The code below demonstrates how you can set up the data to calculate the EMDs in environmental space.</p>
<div class="section level3">
<h3 id="creating-rasterstacks-to-calculate-emd-and-em-speeds-in-environmental-space">Creating ‘RasterStacks’ to calculate EMD and ’EM-Speeds in Environmental Space<a class="anchor" aria-label="anchor" href="#creating-rasterstacks-to-calculate-emd-and-em-speeds-in-environmental-space"></a>
</h3>
<p>We first import the environmental covariate file (e.g., DEM layer), then we re-project the extent from latitude and longitude to UTMs to match those of the home range rasters.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="co">#Load raster</span>
  <span class="va">UtahDEM</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Utah_DEM.tif"</span>, package <span class="op">=</span> <span class="st">"trekR"</span><span class="op">)</span><span class="op">)</span>
  <span class="va">out_proj</span> <span class="op">&lt;-</span> <span class="st">"+proj=utm +zone=12 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0"</span>
  <span class="va">UtahDEM</span><span class="op">@</span><span class="va">extent</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html" class="external-link">extent</a></span><span class="op">(</span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/projectRaster.html" class="external-link">projectExtent</a></span><span class="op">(</span><span class="va">UtahDEM</span>, <span class="va">out_proj</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The <code><a href="../reference/env_raster_stack.html">env_raster_stack()</a></code> function takes the environmental covariate raster and resamples it to the home range rasters. It then takes the resampled rasters and the home range rasters and constructs a object with class <code>RasterStack</code>. The steps following the creation of these <code>RasterStacks</code> is the steps under “Earth Mover’s Distance”, where the <code>RasterLayers</code> objects (i.e., <code>sum_raster</code> and <code>win_raster</code>) are replaced with the <code>RasterStack</code> objects (i.e., <code>sum_rst</code> and <code>win_rst</code>).</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sum_rst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/env_raster_stack.html">env_raster_stack</a></span><span class="op">(</span><span class="va">UtahDEM</span>, <span class="va">sum_raster</span><span class="op">)</span>
<span class="va">win_rst</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/env_raster_stack.html">env_raster_stack</a></span><span class="op">(</span><span class="va">UtahDEM</span>, <span class="va">win_raster</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by John Huang.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.0.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
